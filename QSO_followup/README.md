# QSO Follow-up Observation Tools

This repository contains Python scripts for downloading astronomical image stamps and creating finding charts for QSO (Quasi-Stellar Object) follow-up observations.

## Scripts Overview

### 1. `get_stamps_decals.py`
**Aim**: Download optical image stamps from the DECaLS (Dark Energy Camera Legacy Survey) archive.

**Requirements**:
- Python 3
- `astropy`, `numpy`
- Input file: `.dat` or `.csv` file with columns: `ra`, `dec`, and `ls_id` (or variations)

**Usage**:
```bash
python get_stamps_decals.py -i input_file.dat --bands z
```

**Output**: FITS files named `{ls_id}_decals_{band}.fits` in the current directory.

---

### 2. `get_stamps_ps1.py`
**Aim**: Download optical image stamps from the Pan-STARRS (PS1) archive.

**Requirements**:
- Python 3
- `astropy`, `numpy`
- Input file: `.dat`, `.csv`, or `.fits` file with columns: `ra`, `dec`, and `ls_id`

**Usage**:
```bash
python get_stamps_ps1.py -i input_file.dat --band z
```

**Output**: FITS files named `{ls_id}_ps1_{band}.fits` in the current directory.

---

### 3. `get_stamps_racs.py`
**Aim**: Download radio image stamps from the RACS (Rapid ASKAP Continuum Survey) archive via CASDA.

**Requirements**:
- Python 3
- `astropy`, `numpy`
- Input file: `.dat` or `.csv` file with columns: `ra`, `dec`, and `ls_id`

**Usage**:
```bash
python get_stamps_racs.py -i input_file.dat
```

**Output**: FITS files named `{ls_id}_racs.fits` in the current directory.

---

### 4. `finding_charts_real.py`
**Aim**: Generate finding charts with accurate WCS (World Coordinate System) coordinates for telescope observations.

**Requirements**:
- Python 3
- `astropy`, `matplotlib`, `numpy`
- **Input**: `.dat` file with `ra`, `dec`, and `ls_id` columns
- **Dependencies**: Requires FITS stamp files generated by `get_stamps_decals.py` or `get_stamps_ps1.py`

**Usage**:
```bash
python finding_charts_real.py -i input_file.dat
```

**How it works**: The script searches for stamp files in the following mentioned directory or in the current one as a default


**Output**: PNG finding charts named `finding_chart_real_{ls_id}.png` with:
- Accurate RA/Dec coordinate grids
- Target marked with red circle
- 1 arcminute scale bar
- Survey information (Pan-STARRS or DECaLS)

---

### 5. `quasar_spectra.py`
**Aim**: Plot quasar spectra from `.dat` files showing flux vs. observed wavelength with Lyman-alpha emission line markers.

**Requirements**:
- Python 3
- `astropy`, `matplotlib`, `numpy`
- Input: Spectrum `.dat` files with wavelength and flux columns

**Usage**:
```bash
python quasar_spectra.py
```

**Output**: `quasar_spectra.png` - Multi-panel plot showing stacked spectra with redshift labels and Lya markers.

---

### 6. `radio_optical_overlay.py`
**Aim**: Create overlay plots combining radio (RACS) and optical (Pan-STARRS/DECaLS) images for visual inspection.

**Requirements**:
- Python 3
- `astropy`, `matplotlib`, `numpy`, `reproject`
- **Input**: Lists of radio and optical FITS files, source coordinates
- **Dependencies**: Requires FITS stamp files generated by `get_stamps_racs.py` and `get_stamps_ps1.py` or `get_stamps_decals.py`

**Usage**:
```bash
python radio_optical_overlay.py [arguments]
```

**Output**: Overlay images showing radio contours overlaid on optical images, saved as PNG files.

---

## General Notes

- All scripts handle comment headers in input files (lines starting with `#`)
- Column names are case-insensitive and support multiple variations (`ra`/`RA`, `dec`/`DEC`, `ls_id`/`LS_ID`, etc.)
- The finding charts and overlay scripts require stamp files to be generated first using the `get_stamps_*.py` scripts
- Generated images (PNG files) are typically excluded from version control via `.gitignore`

## Workflow Example

1. **Download stamps**:
   ```bash
   python get_stamps_ps1.py -i candidates.dat --band z
   python get_stamps_racs.py -i candidates.dat
   ```

2. **Create finding charts**:
   ```bash
   python finding_charts_real.py -i candidates.dat
   ```

3. **Create radio-optical overlays**:
   ```bash
   python radio_optical_overlay.py [with appropriate arguments]
   ```

